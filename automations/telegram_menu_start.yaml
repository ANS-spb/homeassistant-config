###################################
#        –ú–µ–Ω—é –≤ Telegram          #
###################################

- alias: Telegram Menu start
  id: telegram_menu_start
  description: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –∏ –ø–æ–∫–∞–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é"

  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: /start
    - platform: event
      event_type: telegram_callback
      event_data:
        command: /back

  action:
    - choose:
        - conditions:
            - condition: template
              value_template: '{{ trigger.event.data.command == "/start" }}'
          sequence:
            - service: telegram_bot.send_message
              data:
                message: &stmsg >
                  {{ [ "–ß—Ç–æ –∂–µ–ª–∞–µ—Ç–µ, –ü–æ–≤–µ–ª–∏—Ç–µ–ª—å?", "–ß—Ç–æ —è –º–æ–≥—É –¥–ª—è –í–∞—Å —Å–¥–µ–ª–∞—Ç—å?", "–í–Ω–∏–º–∞—é!", "–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è" ] | random }}
                parse_mode: html
                disable_notification: true
                disable_web_page_preview: true
                timeout: 500
                inline_keyboard: &mainkeyb
                  - üí° –°–≤–µ—Ç:/lights, ‚Ñπ –°—Ç–∞—Ç—É—Å:/status
                  - ‚òÄ –ü–æ–≥–æ–¥–∞:/weather, üíª –°–∏—Å—Ç–µ–º–∞:/system
                  - ü¶æ –ó–∞–ø—É—Å—Ç–∏—Ç—å —É–±–æ—Ä–∫—É:/vacuum_start
                  - ‚ò¢Ô∏è –†–∞–¥–∏–∞—Ü–∏—è:/radiation, üì∏ –§–æ—Ç–æ —Å –¥–æ–º–æ—Ñ–æ–Ω–∞:/photo_entrance
                target: "{{ trigger.event.data.chat_id }}"
        - conditions:
            - condition: template
              value_template: '{{ trigger.event.data.command == "/back" }}'
          sequence:
            - service: telegram_bot.edit_message
              data:
                message_id: last
                chat_id: "{{ trigger.event.data.chat_id }}"
                message: *stmsg
                inline_keyboard: *mainkeyb
                target: "{{ trigger.event.data.chat_id }}"

  mode: single
