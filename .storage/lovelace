{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "title": "Home Assistant",
      "swipe_nav": {
        "wrap": false,
        "animate": "swipe",
        "prevent_default": true,
        "swipe_amount": 30
      },
      "views": [
        {
          "theme": "macOS Theme",
          "path": "default_view",
          "title": "Дом",
          "icon": "mdi:home",
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Свет:\n"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "icon": "mdi:power",
                      "name": "Выкл свет",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.turn_on",
                        "service_data": {
                          "entity_id": "script.power_off_all"
                        }
                      }
                    },
                    {
                      "type": "button",
                      "icon": "mdi:lamp",
                      "tap_action": {
                        "action": "call-service",
                        "service": "script.turn_on",
                        "service_data": {
                          "entity_id": "script.1599944056170"
                        }
                      },
                      "name": "Вкл свет"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "entity": "script.1638995744105",
                      "name": "Эффект"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "group.dyn_all_lights",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "tile",
                    "entity": "group.dyn_all_lights",
                    "show_entity_picture": false,
                    "tap_action": {
                      "action": "navigate",
                      "navigation_path": "/lovelace/all-lights"
                    }
                  }
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "card": {
                    "type": "entities",
                    "show_header_toggle": false,
                    "state_color": true
                  },
                  "filter": {
                    "include": [
                      {
                        "entity_id": "binary_sensor.dd_na_kukhne_occupancy"
                      },
                      {
                        "entity_id": "binary_sensor.ble_dd_motion"
                      },
                      {
                        "entity_id": "binary_sensor.autooffkitchen"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "off"
                      },
                      {
                        "state": "idle"
                      },
                      {
                        "state": "unavailable"
                      }
                    ]
                  },
                  "sort": {
                    "method": "none"
                  }
                },
                {
                  "type": "markdown",
                  "content": "### Статус:\n"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "person.ans",
                      "icon_type": "entity-picture"
                    },
                    {
                      "type": "custom:mushroom-person-card",
                      "entity": "person.lisitsa",
                      "icon_type": "entity-picture"
                    }
                  ]
                },
                {
                  "type": "entities",
                  "entities": [
                    "input_boolean.gostevoi_rezhim"
                  ]
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "filter": {
                    "include": [
                      {
                        "entity_id": "sensor.geiger_dose_rate"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "unavailable"
                      },
                      {
                        "state": "unknown"
                      },
                      {
                        "last_updated": "> 5"
                      }
                    ]
                  },
                  "card": {
                    "type": "entity",
                    "entity": "sensor.geiger_dose_rate",
                    "name": "Geiger Doserate"
                  }
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "card": {
                    "type": "entities",
                    "show_header_toggle": false,
                    "state_color": true
                  },
                  "filter": {
                    "include": [
                      {
                        "entity_id": "binary_sensor.*_contact"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "off"
                      },
                      {
                        "state": "unavailable"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "card": {
                    "type": "entities",
                    "show_header_toggle": false,
                    "state_color": true
                  },
                  "filter": {
                    "include": [
                      {
                        "domain": "media_player"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "off"
                      },
                      {
                        "state": "idle"
                      },
                      {
                        "state": "unavailable"
                      }
                    ]
                  },
                  "sort": {
                    "method": "none"
                  }
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "card": {
                    "type": "entities",
                    "show_header_toggle": false,
                    "state_color": true
                  },
                  "filter": {
                    "include": [
                      {
                        "domain": "vacuum"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "docked"
                      }
                    ]
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "state": "docked"
                    }
                  ],
                  "card": {
                    "type": "entities",
                    "entities": [
                      "input_button.vacuum_start"
                    ]
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "state_not": "docked"
                    }
                  ],
                  "card": {
                    "type": "entities",
                    "entities": [
                      "input_button.vacuum_stop",
                      "input_button.vacuum_goto_base"
                    ]
                  }
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Погода:\n"
                },
                {
                  "type": "custom:weather-chart-card",
                  "entity": "weather.openweathermap",
                  "units": {
                    "speed": "m/s"
                  },
                  "icons": "/local/weather-icons/"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:multiple-entity-row",
                      "entity": "sensor.spalnia_perception",
                      "name": "Спальня",
                      "icon": "tc:thermal-perception",
                      "styles": {
                        "width": "100px"
                      },
                      "state_header": "Влажность",
                      "entities": [
                        {
                          "name": "Температура",
                          "entity": "sensor.spalnia_simmerzone",
                          "styles": {
                            "width": "100px"
                          }
                        }
                      ]
                    },
                    {
                      "type": "custom:multiple-entity-row",
                      "entity": "sensor.kukhnia_perception",
                      "name": "Кухня",
                      "icon": "tc:thermal-perception",
                      "styles": {
                        "width": "100px"
                      },
                      "state_header": "Влажность",
                      "entities": [
                        {
                          "name": "Температура",
                          "entity": "sensor.kukhnia_simmerzone",
                          "styles": {
                            "width": "100px"
                          }
                        }
                      ]
                    },
                    {
                      "type": "custom:multiple-entity-row",
                      "entity": "sensor.lodzhiia_perception",
                      "name": "Лоджия",
                      "icon": "tc:thermal-perception",
                      "styles": {
                        "width": "100px"
                      },
                      "state_header": "Влажность",
                      "entities": [
                        {
                          "name": "Температура",
                          "entity": "sensor.lodzhiia_simmerzone",
                          "styles": {
                            "width": "100px"
                          }
                        }
                      ]
                    },
                    {
                      "type": "section"
                    },
                    {
                      "type": "custom:multiple-entity-row",
                      "entity": "sensor.ulitsa_owm_perception",
                      "name": "Улица",
                      "icon": "tc:thermal-perception",
                      "styles": {
                        "width": "100px"
                      },
                      "state_header": "Влажность",
                      "entities": [
                        {
                          "name": "Температура",
                          "entity": "sensor.ulitsa_owm_simmerzone",
                          "styles": {
                            "width": "100px"
                          }
                        }
                      ]
                    },
                    {
                      "type": "custom:multiple-entity-row",
                      "entity": "sensor.pressure_indicator",
                      "styles": {
                        "width": "100px"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "custom:mushroom-cover-card",
                  "entity": "cover.shtora",
                  "show_position_control": true,
                  "show_buttons_control": true
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "state_not": "docked"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "state_not": "unavailable"
                    }
                  ],
                  "card": {
                    "type": "custom:mushroom-vacuum-card",
                    "entity": "vacuum.roborock_s6_pure",
                    "icon_animation": true,
                    "commands": [
                      "on_off",
                      "start_pause",
                      "stop",
                      "locate",
                      "clean_spot",
                      "return_home"
                    ]
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.wakeup_enabled",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.wakeup_disabled",
                      "state": "off"
                    },
                    {
                      "entity": "input_boolean.wakeup_homeoffice",
                      "state": "off"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:time-picker-card",
                        "entity": "input_datetime.wakeup_office_time",
                        "hour_mode": 24,
                        "hour_step": 1,
                        "minute_step": 5,
                        "second_step": 5,
                        "name": "",
                        "layout": {
                          "embedded": false,
                          "align_controls": "right",
                          "name": "inside",
                          "thin": true
                        },
                        "hide": {
                          "name": false
                        },
                        "link_values": false
                      }
                    ]
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.wakeup_enabled",
                      "state": "on"
                    },
                    {
                      "entity": "input_boolean.wakeup_disabled",
                      "state": "off"
                    },
                    {
                      "entity": "input_boolean.wakeup_homeoffice",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "vertical-stack",
                    "cards": [
                      {
                        "type": "custom:time-picker-card",
                        "entity": "input_datetime.wakeup_homeoffice_time",
                        "hour_mode": 24,
                        "hour_step": 1,
                        "minute_step": 5,
                        "second_step": 5,
                        "name": "",
                        "layout": {
                          "embedded": false,
                          "align_controls": "right",
                          "name": "inside",
                          "thin": true
                        },
                        "hide": {
                          "name": false
                        },
                        "link_values": false
                      }
                    ]
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.wakeup_weekend",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "custom:time-picker-card",
                    "entity": "input_datetime.wakeup_weekend_time",
                    "hour_mode": 24,
                    "hour_step": 1,
                    "minute_step": 5,
                    "second_step": 5,
                    "name": "",
                    "layout": {
                      "embedded": false,
                      "align_controls": "right",
                      "name": "inside",
                      "thin": true
                    },
                    "hide": {
                      "name": false
                    },
                    "link_values": false
                  }
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "input_boolean.wakeup_enabled"
                    },
                    {
                      "entity": "input_boolean.wakeup_homeoffice"
                    },
                    {
                      "entity": "input_boolean.wakeup_weekend"
                    },
                    {
                      "entity": "sensor.daytime"
                    },
                    {
                      "entity": "binary_sensor.workday"
                    },
                    {
                      "entity": "binary_sensor.workday_tomorrow"
                    },
                    {
                      "entity": "input_boolean.sleep_enabled"
                    },
                    {
                      "entity": "input_boolean.wakeup_disabled"
                    }
                  ],
                  "show_header_toggle": false,
                  "state_color": true
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.sleep_enabled",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "custom:time-picker-card",
                    "entity": "input_datetime.sleep_time",
                    "hour_mode": 24,
                    "hour_step": 1,
                    "minute_step": 5,
                    "second_step": 5,
                    "name": "",
                    "layout": {
                      "embedded": false,
                      "align_controls": "right",
                      "name": "inside",
                      "thin": true
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Свет",
          "path": "light",
          "icon": "mdi:lightbulb-on-outline",
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Спальня:\n"
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "square": false,
                      "columns": 3,
                      "type": "grid",
                      "cards": [
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.torsher_2",
                          "slider": {
                            "direction": "left-right",
                            "background": "solid",
                            "force_square": false,
                            "show_track": false
                          },
                          "action_button": {
                            "mode": "toggle",
                            "show": true
                          },
                          "compact": false
                        },
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.torsherchik",
                          "slider": {
                            "direction": "left-right",
                            "background": "solid",
                            "force_square": false
                          },
                          "action_button": {
                            "mode": "toggle",
                            "show": true
                          }
                        },
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.living_room",
                          "action_button": {
                            "show": true,
                            "mode": "toggle"
                          },
                          "compact": false
                        }
                      ]
                    },
                    {
                      "square": false,
                      "columns": 3,
                      "type": "grid",
                      "cards": [
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.liustra",
                          "slider": {
                            "direction": "left-right",
                            "background": "solid"
                          },
                          "action_button": {
                            "mode": "toggle",
                            "show": true
                          }
                        },
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.wled",
                          "slider": {
                            "direction": "left-right",
                            "background": "solid"
                          },
                          "action_button": {
                            "mode": "toggle",
                            "show": true
                          }
                        },
                        {
                          "type": "custom:slider-button-card",
                          "entity": "light.wled_2",
                          "slider": {
                            "direction": "left-right",
                            "background": "solid"
                          },
                          "action_button": {
                            "mode": "toggle",
                            "show": true
                          }
                        }
                      ]
                    },
                    {
                      "square": false,
                      "columns": 4,
                      "type": "grid",
                      "cards": [
                        {
                          "show_name": false,
                          "show_icon": true,
                          "type": "button",
                          "tap_action": {
                            "action": "toggle"
                          },
                          "entity": "script.1599944056170"
                        },
                        {
                          "show_name": false,
                          "show_icon": true,
                          "type": "button",
                          "tap_action": {
                            "action": "toggle"
                          },
                          "entity": "script.light_tosleep",
                          "name": "Вечерний свет "
                        },
                        {
                          "show_name": false,
                          "show_icon": true,
                          "type": "button",
                          "tap_action": {
                            "action": "toggle"
                          },
                          "entity": "script.1638995744105",
                          "name": "Эффект ленты"
                        },
                        {
                          "show_name": false,
                          "show_icon": true,
                          "icon": "mdi:led-strip-variant-off",
                          "type": "button",
                          "tap_action": {
                            "action": "toggle"
                          },
                          "entity": "script.wled_static_effect",
                          "name": "Гирлянда, не моргай"
                        }
                      ]
                    },
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "input_boolean.manual_light_off"
                        },
                        {
                          "entity": "switch.rozetka"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Прихожая:\n"
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.prikhozhaia",
                          "state_not": "unavailable"
                        }
                      ],
                      "card": {
                        "type": "custom:slider-button-card",
                        "entity": "light.prikhozhaia",
                        "slider": {
                          "direction": "left-right",
                          "background": "solid"
                        },
                        "action_button": {
                          "mode": "toggle"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Кухня:\n"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:slider-button-card",
                      "slider": {
                        "direction": "left-right",
                        "background": "gradient",
                        "use_state_color": true,
                        "use_percentage_bg_opacity": false,
                        "show_track": false,
                        "toggle_on_click": false,
                        "force_square": false
                      },
                      "action_button": {
                        "mode": "toggle",
                        "show": true
                      },
                      "icon": {
                        "icon": ""
                      },
                      "entity": "light.podsvetka_zony"
                    },
                    {
                      "type": "custom:slider-button-card",
                      "entity": "light.kukhnia_potolok",
                      "name": "Споты",
                      "icon": "hue:bulb-spot",
                      "slider": {
                        "use_state_color": false,
                        "use_percentage_bg_opacity": false,
                        "show_track": false
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Весь свет в доме:\n"
                },
                {
                  "type": "tile",
                  "entity": "group.dyn_all_lights",
                  "show_entity_picture": false,
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/all-lights"
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Графики",
          "path": "charts",
          "icon": "mdi:chart-line",
          "type": "custom:masonry-layout",
          "square": false,
          "badges": [],
          "cards": [
            {
              "type": "custom:mini-graph-card",
              "name": "Температура",
              "hour24": true,
              "hours_to_show": 24,
              "group_by": "hour",
              "line_width": 2,
              "entities": [
                {
                  "entity": "sensor.ble_datchik_v_spalne_temperature",
                  "name": "Спальня"
                },
                {
                  "entity": "sensor.ble_temperature_datchik_na_kukhne",
                  "name": "Кухня"
                }
              ],
              "show": {
                "labels": true,
                "labels_secondary": true,
                "average": true,
                "extrema": true,
                "fill": "fade"
              },
              "animate": true,
              "height": 130,
              "style": "ha-card {\n  height: 350px !important;\n}\n"
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Влажность",
              "hour24": true,
              "hours_to_show": 24,
              "group_by": "hour",
              "line_width": 2,
              "entities": [
                {
                  "entity": "sensor.ble_datchik_v_spalne_humidity",
                  "name": "Спальня"
                },
                {
                  "entity": "sensor.ble_humidity_datchik_na_kukhne",
                  "name": "Кухня"
                }
              ],
              "show": {
                "labels": true,
                "labels_secondary": true,
                "average": true,
                "extrema": true,
                "fill": "fade"
              },
              "animate": true,
              "style": "ha-card {\n  height: 350px !important;\n}\n",
              "height": 130
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Внешняя температура",
              "hours_to_show": 48,
              "hour24": true,
              "group_by": "hour",
              "line_width": 2,
              "entities": [
                {
                  "entity": "sensor.openweathermap_temperature",
                  "name": "Текущая OWM"
                },
                {
                  "entity": "sensor.ulitsa_temperature",
                  "name": "Текущая по датчику"
                },
                {
                  "entity": "sensor.lodzhiia_temperature",
                  "name": "Лоджия"
                },
                {
                  "entity": "sensor.outside_temperature_min_value",
                  "name": "Мин. за 24 часа"
                },
                {
                  "entity": "sensor.pressure_average",
                  "name": "Давление",
                  "y_axis": "secondary"
                }
              ],
              "show": {
                "labels": true,
                "labels_secondary": true,
                "average": false,
                "extrema": false,
                "fill": "fade"
              },
              "animate": true,
              "style": "ha-card {\n  height: 350px !important;\n}\n",
              "height": 220
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Воздух",
              "icon": "mdi:molecule-co2",
              "smoothing": true,
              "hour24": true,
              "hours_to_show": 24,
              "group_by": "hour",
              "line_width": 2,
              "entities": [
                {
                  "entity": "sensor.co2_sensor_air_monitor_lite",
                  "name": "CO2"
                },
                {
                  "entity": "sensor.pm2_5_sensor_air_monitor_lite",
                  "name": "PM2.5",
                  "y-axis": "secondary"
                },
                {
                  "entity": "sensor.pm10_sensor_air_monitor_lite",
                  "name": "PM10",
                  "y-axis": "secondary"
                }
              ],
              "show": {
                "labels": true,
                "labels_secondary": true,
                "average": true,
                "extrema": true,
                "fill": "fade"
              },
              "animate": true,
              "style": "ha-card {\n  height: 350px !important;\n}\n",
              "height": 130
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Облачность и освещённость",
              "hour24": true,
              "hours_to_show": 48,
              "line_width": 3,
              "group_by": "hour",
              "lower_bound_secondary": 0,
              "lower_bound": 0,
              "show": {
                "labels": false,
                "fill": "fade",
                "labels_secondary": false
              },
              "animate": true,
              "entities": [
                {
                  "entity": "sensor.openweathermap_cloud_coverage",
                  "name": "Облака",
                  "color": "rgb(52, 152, 219)",
                  "show_line": false,
                  "show_legend": true,
                  "show_points": false,
                  "show_indicator": true,
                  "show_fill": true,
                  "state_adaptive_color": false
                },
                {
                  "entity": "sensor.mini_graph_day_pct",
                  "color": "white",
                  "show_line": false,
                  "show_legend": false,
                  "show_points": false,
                  "show_indicator": false,
                  "show_fill": true,
                  "state_adaptive_color": false
                },
                {
                  "entity": "sensor.mini_graph_night_pct",
                  "color": "dark-grey",
                  "show_line": false,
                  "show_legend": false,
                  "show_points": false,
                  "show_indicator": false,
                  "show_fill": true,
                  "state_adaptive_color": false
                },
                {
                  "entity": "sensor.osveshchionnost_na_kukhne_illuminance_lux",
                  "name": "Кухня",
                  "show_state": true,
                  "show_legend": true,
                  "show_indicator": true,
                  "show_fill": false,
                  "state_adaptive_color": false,
                  "color": "var(--accent-color)",
                  "y_axis": "secondary"
                },
                {
                  "entity": "sensor.osveshchionnost_snaruzhi_illuminance_lux",
                  "name": "Снаружи",
                  "show_state": true,
                  "show_legend": true,
                  "show_indicator": true,
                  "show_fill": false,
                  "state_adaptive_color": false,
                  "color": "rgb(231, 76, 60)",
                  "y_axis": "secondary"
                },
                {
                  "entity": "sensor.osveshchionnost_v_spalne_illuminance_lux",
                  "name": "В комнате",
                  "show_state": true,
                  "show_legend": true,
                  "show_indicator": true,
                  "show_fill": false,
                  "state_adaptive_color": false,
                  "color": "green",
                  "y_axis": "secondary"
                }
              ],
              "style": "ha-card {\n  height: 350px !important;\n}\n",
              "height": 170
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Радиация",
              "hours_to_show": 48,
              "hour24": true,
              "group_by": "hour",
              "line_width": 2,
              "entities": [
                {
                  "entity": "sensor.geiger_dose_rate",
                  "name": "Гейгер"
                }
              ],
              "show": {
                "labels": false,
                "labels_secondary": true,
                "average": true,
                "extrema": true,
                "fill": "fade"
              },
              "animate": true,
              "style": "ha-card {\n  height: 350px !important;\n}\n",
              "height": 150
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Климат",
          "path": "climate",
          "icon": "mdi:home-thermometer-outline",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "statistics-graph",
              "entities": [
                "sensor.ble_datchik_v_spalne_temperature",
                "sensor.ble_temperature_datchik_na_kukhne"
              ],
              "days_to_show": 30,
              "chart_type": "line"
            },
            {
              "type": "statistics-graph",
              "entities": [
                "sensor.ble_datchik_v_spalne_humidity",
                "sensor.ble_humidity_datchik_na_kukhne"
              ],
              "days_to_show": 30
            },
            {
              "type": "gauge",
              "name": "Спальня",
              "entity": "sensor.ble_datchik_v_spalne_temperature",
              "max": 40,
              "min": 0,
              "severity": {
                "blue": 0,
                "green": 18,
                "yellow": 25,
                "red": 30
              },
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "name": "Спальня",
              "entity": "sensor.ble_datchik_v_spalne_humidity",
              "min": 0,
              "max": 100,
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "name": "Кухня",
              "max": 40,
              "entity": "sensor.ble_temperature_datchik_na_kukhne",
              "min": 0,
              "severity": {
                "blue": 0,
                "green": 18,
                "yellow": 25,
                "red": 30
              },
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "name": "Кухня",
              "entity": "sensor.ble_humidity_datchik_na_kukhne",
              "min": 0,
              "max": 100,
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "name": "Лоджия",
              "max": 40,
              "entity": "sensor.lodzhiia_temperature",
              "min": 0,
              "severity": {
                "blue": 0,
                "green": 18,
                "yellow": 25,
                "red": 30
              },
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "entity": "sensor.lodzhiia_humidity",
              "min": 0,
              "max": 100,
              "name": "Лоджия",
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            },
            {
              "type": "gauge",
              "name": "Давление",
              "max": 1050,
              "entity": "sensor.lodzhiia_pressure",
              "min": 950,
              "severity": {
                "green": 1000,
                "yellow": 1020,
                "blue": 1000,
                "red": 1040
              },
              "view_layout": {
                "position": "sidebar"
              },
              "needle": true
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Датчики",
          "path": "sensors",
          "icon": "mdi:gauge",
          "layout": {
            "max_cols": 3
          },
          "type": "custom:masonry-layout",
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Присутствие:\n"
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "person.ans"
                    },
                    {
                      "entity": "person.lisitsa"
                    }
                  ],
                  "refresh_interval": 0,
                  "hours_to_show": 48
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "custom:webrtc-camera",
                  "streams": [
                    {
                      "url": "domru_domofon",
                      "media": "video"
                    },
                    {
                      "url": "domru_domofon",
                      "media": "audio"
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "entity": "script.domru_open_door_657617",
                  "name": "Открыть дверь",
                  "icon": "mdi:home-lock-open",
                  "icon_color": "red",
                  "fill_container": false
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "select.zintercom_mode"
                    },
                    {
                      "entity": "sensor.zintercom_state"
                    }
                  ],
                  "show_header_toggle": false
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Напряжение сети:\n"
                },
                {
                  "type": "custom:history-explorer-card",
                  "cardName": "historycard-29547654",
                  "header": "hide",
                  "legendVisible": false,
                  "defaultTimeRange": "2d",
                  "graphs": [
                    {
                      "type": "line",
                      "entities": [
                        {
                          "entity": "sensor.prikhozhaia_voltage"
                        }
                      ]
                    }
                  ],
                  "refresh": {
                    "interval": 30
                  }
                }
              ]
            },
            {
              "type": "custom:vacuum-card",
              "entity": "vacuum.roborock_s6_pure",
              "image": "default",
              "compact_view": false
            },
            {
              "type": "custom:xiaomi-vacuum-map-card",
              "language": "ru",
              "map_source": {
                "camera": "camera.roborock_s6_pure_map",
                "crop": {
                  "top": 150,
                  "left": 100,
                  "right": 280,
                  "bottom": 230
                }
              },
              "calibration_source": {
                "camera": true
              },
              "entity": "vacuum.roborock_s6_pure",
              "vacuum_platform": "send_command",
              "tiles": [
                {
                  "tile_id": "battery_level",
                  "entity": "vacuum.roborock_s6_pure",
                  "label": "Battery",
                  "attribute": "battery_level",
                  "icon": "mdi:battery-charging-100",
                  "unit": "%"
                },
                {
                  "tile_id": "fan_speed",
                  "entity": "vacuum.roborock_s6_pure",
                  "label": "Fan speed",
                  "attribute": "fan_speed",
                  "icon": "mdi:fan",
                  "translations": {
                    "silent": "Silent",
                    "standard": "Standard",
                    "medium": "Medium",
                    "turbo": "Turbo",
                    "auto": "Auto",
                    "gentle": "Gentle"
                  }
                }
              ],
              "icons": [
                {
                  "icon": "mdi:play",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "cleaning"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "error"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "returning"
                    }
                  ],
                  "tooltip": "Start",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.start",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:pause",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "docked"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "idle"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "error"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "paused"
                    }
                  ],
                  "tooltip": "Pause",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.pause",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:stop",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "docked"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "idle"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "error"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "paused"
                    }
                  ],
                  "tooltip": "Stop",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.stop",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:home-map-marker",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "docked"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "returning"
                    }
                  ],
                  "tooltip": "Return to base",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.return_to_base",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:target-variant",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "docked"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "error"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "cleaning"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "value_not": "returning"
                    }
                  ],
                  "tooltip": "Clean spot",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.clean_spot",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:map-marker",
                  "tooltip": "Locate",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.locate",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Off"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Silent"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-remove",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Silent"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Balanced"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Balanced"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Turbo"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-speed-3",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Turbo"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Max"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Max"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Max+"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Max+"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Custom"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value": "Custom"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Off"
                    }
                  }
                },
                {
                  "icon": "mdi:fan-alert",
                  "conditions": [
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Off"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Silent"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Balanced"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Turbo"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Max"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Max+"
                    },
                    {
                      "entity": "vacuum.roborock_s6_pure",
                      "attribute": "fan_speed",
                      "value_not": "Custom"
                    }
                  ],
                  "tooltip": "Change fan speed",
                  "tap_action": {
                    "action": "call-service",
                    "service": "vacuum.set_fan_speed",
                    "service_data": {
                      "entity_id": "vacuum.roborock_s6_pure",
                      "fan_speed": "Off"
                    }
                  }
                }
              ],
              "map_modes": [
                {
                  "name": "Комнаты",
                  "icon": "mdi:floor-plan",
                  "run_immediately": false,
                  "coordinates_rounding": true,
                  "selection_type": "ROOM",
                  "max_selections": 999,
                  "repeats_type": "REPEAT",
                  "max_repeats": 3,
                  "service_call_schema": {
                    "service": "vacuum.send_command",
                    "service_data": {
                      "command": "app_segment_clean",
                      "params": "[[selection]]",
                      "entity_id": "[[entity_id]]"
                    }
                  },
                  "predefined_selections": [
                    {
                      "id": 16,
                      "icon": {
                        "name": "mdi:broom",
                        "x": 26850,
                        "y": 22950
                      },
                      "label": {
                        "text": "Комната",
                        "x": 26850,
                        "y": 22950,
                        "offset_y": 35
                      },
                      "outline": [
                        [
                          25150,
                          20100
                        ],
                        [
                          28550,
                          20100
                        ],
                        [
                          28550,
                          25800
                        ],
                        [
                          25150,
                          25800
                        ]
                      ]
                    },
                    {
                      "id": 17,
                      "icon": {
                        "name": "mdi:broom",
                        "x": 24250,
                        "y": 21075
                      },
                      "label": {
                        "text": "Коридор",
                        "x": 24250,
                        "y": 21075,
                        "offset_y": 35
                      },
                      "outline": [
                        [
                          23250,
                          20050
                        ],
                        [
                          25250,
                          20050
                        ],
                        [
                          25250,
                          22100
                        ],
                        [
                          23250,
                          22100
                        ]
                      ]
                    },
                    {
                      "id": 18,
                      "icon": {
                        "name": "mdi:broom",
                        "x": 23325,
                        "y": 23975
                      },
                      "label": {
                        "text": "Кухня",
                        "x": 23325,
                        "y": 23975,
                        "offset_y": 35
                      },
                      "outline": [
                        [
                          21750,
                          22150
                        ],
                        [
                          24900,
                          22150
                        ],
                        [
                          24900,
                          25800
                        ],
                        [
                          21750,
                          25800
                        ]
                      ]
                    }
                  ],
                  "variables": {}
                },
                {
                  "name": "Zone cleanup",
                  "icon": "mdi:select-drag",
                  "run_immediately": false,
                  "coordinates_rounding": true,
                  "selection_type": "MANUAL_RECTANGLE",
                  "max_selections": 5,
                  "repeats_type": "EXTERNAL",
                  "max_repeats": 3,
                  "service_call_schema": {
                    "service": "xiaomi_miio.vacuum_clean_zone",
                    "service_data": {
                      "zone": "[[selection]]",
                      "repeats": "[[repeats]]",
                      "entity_id": "[[entity_id]]"
                    }
                  },
                  "predefined_selections": [],
                  "variables": {}
                },
                {
                  "name": "Pin & Go",
                  "icon": "mdi:map-marker-plus",
                  "run_immediately": false,
                  "coordinates_rounding": true,
                  "selection_type": "MANUAL_POINT",
                  "max_selections": 999,
                  "repeats_type": "NONE",
                  "max_repeats": 1,
                  "service_call_schema": {
                    "service": "xiaomi_miio.vacuum_goto",
                    "service_data": {
                      "x_coord": "[[point_x]]",
                      "y_coord": "[[point_y]]",
                      "entity_id": "[[entity_id]]"
                    }
                  },
                  "predefined_selections": [],
                  "variables": {}
                }
              ],
              "map_locked": true
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Система",
          "path": "system-health",
          "icon": "mdi:server",
          "visible": [
            {
              "user": "54073e3322e74e96a6480f01a91546e3"
            },
            {
              "user": "2eb37a0f536a4e17bed83629e865cbda"
            },
            {
              "user": "80d00bac24804dd089952c07c3fa2816"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "**Состояние**"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "sensor.start_time"
                    }
                  ]
                },
                {
                  "type": "grid",
                  "cards": [
                    {
                      "type": "custom:mini-graph-card",
                      "name": "CPU Usage",
                      "entities": [
                        "sensor.processor_use"
                      ],
                      "show": {
                        "fill": "fade"
                      },
                      "animate": true,
                      "hours_to_show": 12,
                      "points_per_hour": 10
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "name": "CPU Temp",
                      "entities": [
                        "sensor.cpu_temp"
                      ],
                      "hours_to_show": 12,
                      "points_per_hour": 10,
                      "show": {
                        "fill": "fade"
                      },
                      "animate": true,
                      "color_thresholds": [
                        {
                          "value": 30,
                          "color": "#f39c12"
                        },
                        {
                          "value": 50,
                          "color": "#d35400"
                        },
                        {
                          "value": 70,
                          "color": "#c0392b"
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "name": "RAM Usage",
                      "entities": [
                        "sensor.memory_use_percent"
                      ],
                      "hours_to_show": 12,
                      "points_per_hour": 4,
                      "show": {
                        "graph": "bar"
                      },
                      "animate": true,
                      "color_thresholds": [
                        {
                          "color": "#4bcf17",
                          "value": 0
                        },
                        {
                          "color": "#cfba17",
                          "value": 50
                        },
                        {
                          "color": "#cf1717",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "name": "Swap Usage",
                      "entities": [
                        "sensor.swap_use_percent"
                      ],
                      "hours_to_show": 12,
                      "points_per_hour": 4,
                      "show": {
                        "graph": "bar"
                      },
                      "animate": true,
                      "color_thresholds": [
                        {
                          "color": "#4bcf17",
                          "value": 0
                        },
                        {
                          "color": "#cfba17",
                          "value": 50
                        },
                        {
                          "color": "#cf1717",
                          "value": 80
                        }
                      ]
                    },
                    {
                      "type": "gauge",
                      "entity": "sensor.disk_use_percent",
                      "min": 0,
                      "max": 100,
                      "severity": {
                        "green": 0,
                        "yellow": 70,
                        "red": 90
                      },
                      "name": "SSD"
                    },
                    {
                      "type": "gauge",
                      "entity": "sensor.hdd_use_percent",
                      "min": 0,
                      "max": 100,
                      "severity": {
                        "green": 0,
                        "yellow": 70,
                        "red": 90
                      },
                      "name": "HDD"
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "entities": [
                        "sensor.recorder_db_size"
                      ],
                      "hours_to_show": 96,
                      "points_per_hour": 0.25,
                      "show": {
                        "graph": "bar"
                      },
                      "animate": true
                    },
                    {
                      "type": "custom:mini-graph-card",
                      "name": "InfluxDB Size",
                      "entities": [
                        "sensor.influxdb_size"
                      ],
                      "hours_to_show": 96,
                      "points_per_hour": 0.25,
                      "show": {
                        "graph": "bar"
                      },
                      "animate": true
                    }
                  ],
                  "columns": 2
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entity": "sensor.home_assistant_v2_db_size",
                      "icon": "mdi:database"
                    },
                    {
                      "entity": "sensor.influxdb_size",
                      "icon": "mdi:database"
                    }
                  ]
                }
              ]
            },
            {
              "type": "logbook",
              "entities": [
                "automation.zvonok_v_domofon",
                "sensor.zintercom_state",
                "automation.zvonok_v_dver",
                "select.zintercom_mode"
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:numberbox-card",
                  "entity": "input_number.scale_minimal_battery"
                },
                {
                  "type": "custom:numberbox-card",
                  "entity": "input_number.scale_max_temp"
                },
                {
                  "type": "custom:numberbox-card",
                  "entity": "input_number.scale_min_temp"
                }
              ]
            },
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Батарейки:\n"
                },
                {
                  "type": "custom:battery-state-card",
                  "sort_by_level": "asc",
                  "collapse": [
                    {
                      "name": "Открытие (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:door",
                      "entities": [
                        "sensor.zintercom_battery",
                        "sensor.zvonok_battery",
                        "sensor.okno_na_kukhne_battery",
                        "sensor.okno_v_komnate_battery"
                      ]
                    },
                    {
                      "name": "Движение (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:motion-sensor",
                      "entities": [
                        "sensor.dd_na_kukhne_battery",
                        "sensor.ble_dd_battery"
                      ]
                    },
                    {
                      "name": "Освещённость (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:weather-sunny",
                      "entities": [
                        "sensor.osveshchionnost_v_spalne_battery",
                        "sensor.osveshchionnost_na_kukhne_battery",
                        "sensor.osveshchionnost_snaruzhi_battery",
                        "sensor.osveshchionnost_v_prikhozhei_battery"
                      ]
                    },
                    {
                      "name": "Климат (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:thermometer-lines",
                      "entities": [
                        "sensor.ble_datchik_v_spalne_battery",
                        "sensor.ble_battery_datchik_na_kukhne",
                        "sensor.lodzhiia_battery",
                        "sensor.ulitsa_battery"
                      ]
                    },
                    {
                      "name": "Кнопки (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:gesture-tap-button",
                      "entities": [
                        "sensor.knopka_aqara_komnata_battery",
                        "sensor.knopka_v_koridore_battery",
                        "sensor.upravlenie_shtoroi_battery",
                        "sensor.dimmer_kukhni_battery",
                        "sensor.dimmer_torsherchika_battery",
                        "sensor.hue_dimmer_switch_1_battery_level",
                        "sensor.hue_dimmer_switch_2_battery_level",
                        "sensor.hue_wall_switch_module_1_battery_level",
                        "sensor.vykliuchatel_liustry_battery"
                      ]
                    },
                    {
                      "name": "Брелки (min: {min}%, count: {count})",
                      "secondary_info": "Заряд {range}%",
                      "icon": "mdi:bluetooth",
                      "entities": [
                        "sensor.nut_mini"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "custom:auto-entities",
              "card": {
                "type": "custom:fold-entity-row",
                "head": {
                  "type": "section",
                  "label": "Подсчёт объектов"
                }
              },
              "filter": {
                "include": [
                  {
                    "entity_id": "sensor.total*"
                  }
                ],
                "exclude": []
              }
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "update.zigbee2mqtt_update"
                },
                {
                  "entity": "sensor.zigbee2mqtt_version_2"
                },
                {
                  "entity": "sensor.zigbee2mqtt_bridge_status"
                },
                {
                  "entity": "sensor.zigbee2mqtt_coordinator_type"
                },
                {
                  "entity": "sensor.zigbee2mqtt_coordinator_firmware"
                },
                {
                  "entity": "sensor.zigbee2mqtt_coordinator_version"
                },
                {
                  "entity": "sensor.zigbee2mqtt_coordinator_zigbee_channel"
                },
                {
                  "entity": "sensor.zigbee2mqtt_defined_groups"
                },
                {
                  "entity": "sensor.zigbee2mqtt_device_count"
                }
              ],
              "show_header_toggle": false
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Zigbee",
          "path": "zigbee",
          "icon": "mdi:zigbee",
          "panel": true,
          "type": "panel",
          "visible": [
            {
              "user": "54073e3322e74e96a6480f01a91546e3"
            },
            {
              "user": "2eb37a0f536a4e17bed83629e865cbda"
            },
            {
              "user": "80d00bac24804dd089952c07c3fa2816"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### <center> ZigBee2MQTT </center>"
                },
                {
                  "type": "custom:flex-table-card",
                  "clickable": false,
                  "entities": {
                    "include": [
                      "sensor.*_linkquality"
                    ]
                  },
                  "sort_by": "last_seen-",
                  "columns": [
                    {
                      "data": "icon",
                      "name": " ",
                      "modify": "\"<ha-icon id=\\\"icon\\\" icon=\\\"\" + \"mdi:zigbee\" + \"\\\"></ha-icon>\""
                    },
                    {
                      "data": "friendly_name",
                      "name": "Friendly Name",
                      "modify": "x.replace(/ Linkquality$/,\"\")"
                    },
                    {
                      "data": "linkquality",
                      "name": "Link quality",
                      "modify": "isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)"
                    },
                    {
                      "data": "battery",
                      "name": "Battery",
                      "fmt": "number",
                      "modify": "isNaN(parseInt(x, 10)) ? \"--\" : parseInt(x, 10) + \"%\""
                    },
                    {
                      "data": "voltage",
                      "name": "Voltage",
                      "modify": "isNaN(parseInt(x, 10)) ? \"--\" : parseInt(x, 10)/1000"
                    },
                    {
                      "data": "last_seen",
                      "name": "Last seen",
                      "modify": "var dt = new Date(x); var d = parseInt((Date.now()-Date.parse(x)) / 86400000); var hrs = parseInt(((Date.now()-Date.parse(x)) / 3600000) % 24); var min = parseInt(((Date.now()-Date.parse(x)) / 60000) % 60); var sec = parseInt(((Date.now()-Date.parse(x)) / 1000) % 60); hrs = (hrs < 10) ? \"0\" + hrs : hrs; min = (min < 10) ? \"0\" + min : min; sec = (sec < 10) ? \"0\" + sec : sec; isFinite(dt) ? d + \"d \" + hrs + \":\" + min + \":\" + sec : \"\";\n"
                    },
                    {
                      "data": "battery_type",
                      "name": "Battery type",
                      "modify": "x+''"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery changed",
                      "modify": "x+''"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime days",
                      "modify": "var dt = new Date(x); var d = parseInt((Date.now()-Date.parse(x)) / 86400000); isFinite(dt) ? d + \" day(s)\" : \"\";\n"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime",
                      "modify": "var dt = new Date(x); var m = parseInt(((Date.now()-Date.parse(x)) / 2635200000)); var d = parseInt(((Date.now()-Date.parse(x)) / 86400000) %30); m = (m < 1) ? \"\" + m : m; isFinite(dt) ? m + \" mon \" + d + \" day(s)\" : \"\";\n"
                    }
                  ]
                },
                {
                  "type": "markdown",
                  "content": "### <center> BLE Monitor </center>"
                },
                {
                  "type": "custom:flex-table-card",
                  "clickable": false,
                  "entities": {
                    "include": [
                      "sensor.ble_rssi_*"
                    ]
                  },
                  "sort_by": "last_seen-",
                  "columns": [
                    {
                      "data": "icon",
                      "name": " ",
                      "modify": "\"<ha-icon id=\\\"icon\\\" icon=\\\"\" + \"mdi:bluetooth\" + \"\\\"></ha-icon>\""
                    },
                    {
                      "data": "friendly_name",
                      "name": "Friendly Name",
                      "modify": "x.replace(\"ble_rssi\",\"\")"
                    },
                    {
                      "data": "sensor_type",
                      "name": "Sensor type"
                    },
                    {
                      "data": "firmware",
                      "name": "Firmware"
                    },
                    {
                      "data": "state",
                      "name": "RSSI",
                      "modify": "isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)"
                    },
                    {
                      "data": "battery_level",
                      "name": "Battery",
                      "fmt": "number",
                      "modify": "isNaN(parseInt(x, 10)) ? \"--\" : parseInt(x, 10) + \"%\""
                    },
                    {
                      "data": "mac_address",
                      "name": "MAC address"
                    },
                    {
                      "data": "last_changed",
                      "name": "Last Seen",
                      "modify": "var dt = new Date(x);  var d = parseInt((Date.now()-Date.parse(x)) / 86400000);  var hrs = parseInt(((Date.now()-Date.parse(x)) / 3600000) % 24);  var min = parseInt(((Date.now()-Date.parse(x)) / 60000) % 60); var sec = parseInt(((Date.now()-Date.parse(x)) / 1000) % 60);  hrs = (hrs < 10) ? \"0\" + hrs : hrs;  min = (min < 10) ? \"0\" + min : min; sec = (sec < 10) ? \"0\" + sec : sec;  isFinite(dt) ? d + \"d \" + hrs + \":\" + min + \":\" + sec : \"\";\n"
                    },
                    {
                      "data": "last_packet_id",
                      "name": "Last packet ID"
                    },
                    {
                      "data": "battery_type",
                      "name": "Battery type",
                      "modify": "x+''"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime days",
                      "modify": "var dt = new Date(x); var d = parseInt((Date.now()-Date.parse(x)) / 86400000); isFinite(dt) ? d + \" day(s)\" : \"\";\n"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime",
                      "modify": "var dt = new Date(x); var m = parseInt(((Date.now()-Date.parse(x)) / 2635200000)); var d = parseInt(((Date.now()-Date.parse(x)) / 86400000) %30); m = (m < 1) ? \"\" + m : m; isFinite(dt) ? m + \" mon \" + d + \" day(s)\" : \"\";\n"
                    }
                  ]
                },
                {
                  "type": "markdown",
                  "content": "### <center> Philips Hue </center>"
                },
                {
                  "type": "custom:flex-table-card",
                  "clickable": false,
                  "entities": {
                    "include": [
                      "sensor.*_zigbee_connectivity"
                    ]
                  },
                  "sort_by": "friendly_name-",
                  "columns": [
                    {
                      "data": "icon",
                      "name": " ",
                      "modify": "\"<ha-icon id=\\\"icon\\\" icon=\\\"\" + \"mdi:zigbee\" + \"\\\"></ha-icon>\""
                    },
                    {
                      "data": "friendly_name",
                      "name": "Friendly Name",
                      "modify": "x.replace(/ Zigbee Connectivity$/,\"\")"
                    },
                    {
                      "data": "mac_address",
                      "name": "MAC address"
                    },
                    {
                      "data": "state",
                      "name": "State",
                      "modify": "x.replace(/connectivity_issue$/,\"⚠️\")"
                    }
                  ]
                },
                {
                  "type": "custom:flex-table-card",
                  "clickable": false,
                  "entities": {
                    "include": [
                      "sensor.hue_*_battery_level"
                    ]
                  },
                  "sort_by": "friendly_name-",
                  "columns": [
                    {
                      "data": "icon",
                      "name": " ",
                      "modify": "\"<ha-icon id=\\\"icon\\\" icon=\\\"\" + \"mdi:zigbee\" + \"\\\"></ha-icon>\""
                    },
                    {
                      "data": "friendly_name",
                      "name": "Friendly Name",
                      "modify": "x.replace(/ Battery$/,\"\")"
                    },
                    {
                      "data": "battery_state",
                      "name": "Battery state"
                    },
                    {
                      "data": "state",
                      "name": "Battery level"
                    },
                    {
                      "data": "battery_type",
                      "name": "Battery type",
                      "modify": "x+''"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime days",
                      "modify": "var dt = new Date(x); var d = parseInt((Date.now()-Date.parse(x)) / 86400000); isFinite(dt) ? d + \" day(s)\" : \"\";\n"
                    },
                    {
                      "data": "battery_change",
                      "name": "Battery lifetime",
                      "modify": "var dt = new Date(x); var m = parseInt(((Date.now()-Date.parse(x)) / 2635200000)); var d = parseInt(((Date.now()-Date.parse(x)) / 86400000) %30); m = (m < 1) ? \"\" + m : m; isFinite(dt) ? m + \" mon \" + d + \" day(s)\" : \"\";\n"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Meshtastic",
          "path": "meshtastic",
          "icon": "mdi:access-point",
          "type": "sidebar",
          "visible": [],
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.meshtastic_airtime",
                  "secondary_info": "last-updated"
                },
                {
                  "entity": "sensor.meshtastic_radio_frequency"
                },
                {
                  "entity": "sensor.meshtastic_channel_utilization"
                },
                {
                  "entity": "sensor.meshtastic_tx_utilization"
                },
                {
                  "entity": "sensor.meshtastic_uptime"
                },
                {
                  "entity": "sensor.meshtastic_uptime_raw"
                },
                {
                  "entity": "sensor.meshtastic_reboot_counter"
                },
                {
                  "entity": "sensor.meshtastic_wifi_rssi"
                },
                {
                  "entity": "sensor.meshtastic_wifi_ip"
                },
                {
                  "entity": "sensor.meshtastic_battery"
                },
                {
                  "entity": "sensor.meshtastic_voltage"
                }
              ],
              "show_header_toggle": false,
              "view_layout": {
                "position": "sidebar"
              }
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:apexcharts-card",
                  "apex_config": {
                    "chart": {
                      "height": "250px"
                    }
                  },
                  "header": {
                    "show": true,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "stacked": true,
                  "hours_12": false,
                  "graph_span": "24h",
                  "span": {
                    "end": "hour",
                    "offset": ""
                  },
                  "series": [
                    {
                      "entity": "sensor.meshtastic_airtime",
                      "name": "tx",
                      "type": "column",
                      "data_generator": "let now = start.getTime();\nconst data = JSON.parse(\"[\" + entity.attributes.tx_log + \"]\").reverse();\nreturn data.map((entry) => {\n  const lNow = now;\n  now += 60 * 60 * 1000;\n  return [lNow, entry];\n}).reverse();\n",
                      "group_by": {
                        "func": "min",
                        "duration": "1h"
                      }
                    },
                    {
                      "entity": "sensor.meshtastic_airtime",
                      "name": "rx",
                      "type": "column",
                      "data_generator": "let now = start.getTime();\nconst data = JSON.parse(\"[\" + entity.attributes.rx_log + \"]\").reverse();\nreturn data.map((entry) => {\n  const lNow = now;\n  now += 60 * 60 * 1000;\n  return [lNow, entry];\n}).reverse();\n",
                      "group_by": {
                        "func": "min",
                        "duration": "1h"
                      }
                    },
                    {
                      "entity": "sensor.meshtastic_airtime",
                      "name": "all_rx",
                      "type": "column",
                      "data_generator": "let now = start.getTime();\nconst data = JSON.parse(\"[\" + entity.attributes.rx_all_log + \"]\").reverse();\nreturn data.map((entry) => {\n  const lNow = now;\n  now += 60 * 60 * 1000;\n  return [lNow, entry];\n}).reverse();\n",
                      "group_by": {
                        "func": "min",
                        "duration": "1h"
                      }
                    }
                  ]
                },
                {
                  "type": "custom:apexcharts-card",
                  "apex_config": {
                    "chart": {
                      "height": "250px"
                    }
                  },
                  "header": {
                    "show": true,
                    "show_states": true,
                    "colorize_states": true
                  },
                  "stacked": true,
                  "hours_12": false,
                  "graph_span": "24h",
                  "span": {
                    "end": "hour",
                    "offset": ""
                  },
                  "series": [
                    {
                      "entity": "sensor.meshtastic_channel_utilization",
                      "name": "ch util",
                      "type": "column",
                      "group_by": {
                        "func": "max",
                        "duration": "1h"
                      }
                    },
                    {
                      "entity": "sensor.meshtastic_tx_utilization",
                      "name": "tx util",
                      "type": "column",
                      "group_by": {
                        "func": "max",
                        "duration": "1h"
                      }
                    }
                  ]
                },
                {
                  "type": "history-graph",
                  "entities": [
                    {
                      "entity": "sensor.meshtastic_channel_utilization"
                    },
                    {
                      "entity": "sensor.meshtastic_utilization_tx"
                    }
                  ],
                  "hours_to_show": 24,
                  "refresh_interval": 10
                }
              ]
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "TEST",
          "path": "test",
          "type": "panel",
          "visible": [
            {
              "user": "54073e3322e74e96a6480f01a91546e3"
            },
            {
              "user": "2eb37a0f536a4e17bed83629e865cbda"
            },
            {
              "user": "80d00bac24804dd089952c07c3fa2816"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "custom:history-explorer-card",
                  "header": "hide",
                  "graphs": [
                    {
                      "type": "timeline",
                      "entities": [
                        {
                          "entity": "device_tracker.iphone_ans"
                        },
                        {
                          "entity": "device_tracker.iphone_ans_ble"
                        },
                        {
                          "entity": "device_tracker.aw_ans_ble"
                        },
                        {
                          "entity": "device_tracker.ble_tracker_nut"
                        },
                        {
                          "entity": "group.devices"
                        },
                        {
                          "entity": "light.prikhozhaia"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "custom:history-explorer-card",
                  "header": "hide",
                  "graphs": [
                    {
                      "type": "timeline",
                      "entities": [
                        {
                          "entity": "binary_sensor.dd_na_kukhne_occupancy",
                          "name": "ДД ZB"
                        },
                        {
                          "entity": "binary_sensor.ble_dd_motion",
                          "name": "ДД BLE"
                        },
                        {
                          "entity": "binary_sensor.prisutstvie_na_kukhne",
                          "name": "Группа"
                        },
                        {
                          "entity": "binary_sensor.autooffkitchen",
                          "name": "Шаблонный 3 мин"
                        },
                        {
                          "entity": "light.kukhnia_potolok"
                        }
                      ]
                    }
                  ],
                  "refresh": {
                    "automatic": true
                  }
                },
                {
                  "type": "custom:history-explorer-card",
                  "header": "hide",
                  "graphs": [
                    {
                      "type": "timeline",
                      "entities": [
                        {
                          "entity": "input_text.frigate_event_new"
                        },
                        {
                          "entity": "input_text.frigate_event_end"
                        }
                      ]
                    }
                  ],
                  "refresh": {
                    "automatic": true
                  }
                },
                {
                  "type": "custom:history-explorer-card",
                  "header": "hide",
                  "graphs": [
                    {
                      "type": "timeline",
                      "entities": [
                        {
                          "entity": "binary_sensor.gateway"
                        },
                        {
                          "entity": "binary_sensor.google"
                        },
                        {
                          "entity": "binary_sensor.yandex"
                        },
                        {
                          "entity": "binary_sensor.internet"
                        },
                        {
                          "entity": "binary_sensor.yeelight"
                        },
                        {
                          "entity": "binary_sensor.wled_strip"
                        },
                        {
                          "entity": "binary_sensor.wled_garland"
                        },
                        {
                          "entity": "binary_sensor.wled_table"
                        },
                        {
                          "entity": "binary_sensor.espdisplay"
                        }
                      ]
                    }
                  ],
                  "refresh": {
                    "automatic": true
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "macOS Theme",
          "title": "Весь свет",
          "path": "all-lights",
          "icon": "mdi:ceiling-light-multiple-outline",
          "type": "panel",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "custom:stack-in-card",
              "mode": "vertical",
              "cards": [
                {
                  "type": "markdown",
                  "content": "### Весь свет в доме:\n"
                },
                {
                  "type": "custom:auto-entities",
                  "show_empty": false,
                  "card": {
                    "type": "entities",
                    "show_header_toggle": false,
                    "state_color": true
                  },
                  "filter": {
                    "include": [
                      {
                        "domain": "light"
                      }
                    ],
                    "exclude": [
                      {
                        "state": "off"
                      },
                      {
                        "state": "unavailable"
                      }
                    ]
                  },
                  "sort": {
                    "method": "none"
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  }
}